<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>S3 Saver Loader | Cubusky S3 | 1.0.0 </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="S3 Saver Loader | Cubusky S3 | 1.0.0 ">
      
      
      <link rel="icon" href="../manual/images/favicon.png">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      <meta name="docfx:disablenewtab" content="true">
      
      <meta name="docfx:docurl" content="https://github.com/Cubusky/com.cubusky.s3/blob/main/Documentation~/manual/S3SaverLoader.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../manual/images/logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="s3-saver-loader">S3 Saver Loader</h1>

<p>S3SaverLoader saves and loads data to and from an S3 bucket.</p>
<p><img src="images/S3SaverLoader.png" alt=""></p>
<h2 id="general-settings">General Settings</h2>
<ul>
<li>The region is where your bucket is located (AWS Region).</li>
<li>The bucket name is the name of your bucket (Name).</li>
</ul>
<p><img src="images/Buckets.png" alt=""></p>
<ul>
<li>The key determines the file path to save to.</li>
<li>The tags list allows you to provide additional tags when saving an object to S3.</li>
</ul>
<p><img src="images/ObjectOverview.png" alt="">
<img src="images/ObjectTags.png" alt=""></p>
<ul>
<li>The prefix is used to only load objects from a relative path.</li>
<li>The max keys is used to limit the amount of objects that can be loaded in a single batch. Typically you want this to be as high as possible, since Amazon will always charge the same price no matter how many objects you collect in a single batch.</li>
<li>The max calls is used to limit the amount of calls to make to Amazon servers when loading huge amounts of objects (indefinite when set to -1). If your server contains millions of objects, collecting all objects can be costly. When you only need to collect 10,000 objects, you can instead set your max keys to 1,000 and your max calls to 10. Same results for a fraction of the costs.</li>
</ul>
<h2 id="extensibility">Extensibility</h2>
<p>It may be important to determine your save key based on runtime data. The easiest way by far to do so is to extend the <code>S3SaverLoader</code> (or any <code>ISaverLoader</code> for that matter). As long as it's serializable, you may then select it like any other <code>ISaverLoader</code> in the inspector.</p>
<pre><code class="lang-csharp">[Serializable]
public class S3UserSaverLoader : S3SaverLoader, IS3Saver, IS3Loader
{
    [field: SerializeField] public GameObject owner { get; set; }

    new public string key
    {
        get
        {
            var userId = GetUserId();

            var baseKey = Path.GetFileNameWithoutExtension(base.key).Replace('\\', '/');
            var extension = Path.GetExtension(base.key);

            return !owner.scene.IsValid()
                ? throw new InvalidOperationException($&quot;Can't save or load when an owner has an invalid scene reference&quot;)
                : $&quot;{baseKey}/{owner.scene.name}/{userId}/{DateTime.UtcNow:u}{extension}&quot;
                .TrimStart('/');
        }
    }
}
</code></pre>
<p><img src="images/S3UserSaverLoader.png" alt=""></p>
<p>Given a scene named <code>level 1</code> and a user id of <code>1234</code>, these settings will result in the following path in your S3 bucket: <code>Heatmaps/level 1/1234/2024-03-21 20:07:52Z.json</code></p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/Cubusky/com.cubusky.s3/blob/main/Documentation~/manual/S3SaverLoader.md/#L1" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made by <a href="https://github.com/Cubusky" target="_blank">Cubusky</a> using <a href="https://dotnet.github.io/docfx" target="_blank">DocFX</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
